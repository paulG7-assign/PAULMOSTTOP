<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MOST 1 â€“ Leaderboard</title>
  <style>
    body { background: black; color: white; font-family: sans-serif; text-align: center; padding: 40px; }
    .entry { background: #111; margin: 20px auto; padding: 15px; max-width: 400px; border-radius: 5px; }
    .votes { color: #00ff88; font-weight: bold; }
    .vote-button { margin-top: 10px; padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 4px; cursor:pointer; }
    .vote-button:disabled { background: #555; cursor: not-allowed; }
    #info-msg { margin-top:20px; color:#ffcc00; }
  </style>
</head>
<body>
  <h1>Leaderboard â€“  MOST ATTRACTIVE</h1>
  <div id="leaderboard"></div>
  <div id="info-msg"></div>

  <script>
    const USERS = ["PILI", "BINALAMBANG", "BODUMO", "ABEJUELA","ATIENZA"];
    const PAGE_ID = "most3";
    const STORAGE_VOTES = PAGE_ID + "_votes";
    const STORAGE_DATE = PAGE_ID + "_votes_date";
    const STORAGE_VOTED = PAGE_ID + "_voted";
    const RESET_MS = 5 * 24 * 60 * 60 * 1000;

    function load() {
      const storedDate = localStorage.getItem(STORAGE_DATE);
      const now = Date.now();

      if (!storedDate || now - parseInt(storedDate) > RESET_MS) {
        localStorage.setItem(STORAGE_DATE, now.toString());
        localStorage.setItem(STORAGE_VOTES, JSON.stringify([0,0,0,0]));
        localStorage.removeItem(STORAGE_VOTED);
        return { votes: [0,0,0,0], voted: false };
      }
      return {
        votes: JSON.parse(localStorage.getItem(STORAGE_VOTES) || "[0,0,0,0]"),
        voted: localStorage.getItem(STORAGE_VOTED) !== null
      };
    }

    function save(votes, voted) {
      localStorage.setItem(STORAGE_VOTES, JSON.stringify(votes));
      if (voted) localStorage.setItem(STORAGE_VOTED, "1");
    }

    function vote(i) {
      if (data.voted) return;
      data.votes[i]++;
      data.voted = true;
      save(data.votes, true);
      render();
    }

    function render() {
      const board = document.getElementById("leaderboard");
      board.innerHTML = "";

      const arr = USERS.map((name,i) => ({ name, votes: data.votes[i], index: i }));
      arr.sort((a,b) => b.votes - a.votes);

      arr.forEach((u, rank) => {
        const div = document.createElement("div");
        div.className = "entry";
        div.innerHTML = `
          <div><strong>${["ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰"][rank]||rank+1} ${u.name}</strong></div>
          <div class="votes">Votes: ${u.votes}</div>
          <button class="vote-button" onclick="vote(${u.index})" ${data.voted ? "disabled" : ""}>Vote</button>
        `;
        board.appendChild(div);
      });

      if (data.voted) {
        document.getElementById("info-msg").textContent = "You already voted on this page.";
      }
    }

    const data = load();
    render();
  </script>
</body>
</html>
